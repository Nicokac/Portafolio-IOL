# QA v0.5.5 — UX enhancements en recomendaciones

## Badge de caché predictivo
- `ui.tabs.recommendations._render_cache_status` muestra el ratio de aciertos en formato porcentual y el TTL restante en segundos.
- Los umbrales de color se centralizaron en `shared.settings.CACHE_HIT_THRESHOLDS` (`green`: ≥ 70 %, `yellow`: ≥ 40 %).
- `tests/ui/test_recommendations_cache_badges.py::test_render_cache_status_uses_threshold_colors` valida los tres estados esperados (`green`, `yellow`, `red`).

## Feedback en exportación adaptativa
- El botón **Exportar reporte adaptativo** publica un toast de inicio, uno de éxito (`✅`) y uno de error (`❌`) según el resultado.
- `tests/ui/test_recommendations_cache_badges.py::test_export_adaptive_report_success_triggers_toasts` y `::test_export_adaptive_report_error_triggers_failure_toast` cubren el flujo feliz y el de excepción.

## Tooltips de β-shift y σ sectorial
- Las métricas dentro de "Correlaciones sectoriales" incluyen `help` para aclarar: β-shift → "Cambio promedio en sensibilidad del portafolio respecto al benchmark"; σ → "Dispersión sectorial (volatilidad entre sectores pronosticados)".

## Verificación manual (`_render_for_test`)
Ejecutar en una consola de Python:

```python
from pathlib import Path
import pandas as pd
from ui.tabs import recommendations

recommendations._render_for_test(pd.DataFrame(), state=Path("docs/fixtures/default/profile_default.json"))
```

El helper levanta los fixtures por defecto, dispara la precarga de predicciones y muestra el badge:

```
Cache: 83.3% hits · TTL restante: 21598s · Última actualización: 2024-05-01 12:30:00
```

La exportación adaptativa desde la pestaña de correlaciones debería producir toasts `Generando reporte adaptativo...` y `✅ Reporte generado` tras completar el flujo offline.
